<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portfolio Admin Panel</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500&family=DM+Mono:wght@400;500&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0d0d14;--surface:#13131f;--surface2:#1c1c2e;--surface3:#242438;
  --accent:#e8ff47;--accent2:#47ffdb;--danger:#ff5f5f;--success:#47ff8a;
  --text:#f0f0f0;--muted:#888899;--border:rgba(255,255,255,0.08);
  --sidebar-w:220px;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;font-weight:300;overflow-x:hidden}
::-webkit-scrollbar{width:4px;height:4px}
::-webkit-scrollbar-track{background:var(--surface)}
::-webkit-scrollbar-thumb{background:var(--border)}

/* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
.admin-layout{display:grid;grid-template-columns:var(--sidebar-w) 1fr;grid-template-rows:56px 1fr;min-height:100vh}

/* ‚îÄ‚îÄ TOP BAR ‚îÄ‚îÄ */
.topbar{grid-column:1/-1;background:var(--surface);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 1.5rem;position:sticky;top:0;z-index:100}
.topbar-logo{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:3px;color:var(--accent)}
.topbar-right{display:flex;align-items:center;gap:1rem}
.topbar-status{font-family:'DM Mono',monospace;font-size:.65rem;letter-spacing:2px;color:var(--muted);display:flex;align-items:center;gap:.5rem}
.status-dot{width:7px;height:7px;border-radius:50%;background:var(--success);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.btn-preview{background:none;border:1px solid var(--border);color:var(--muted);padding:.4rem 1rem;font-size:.7rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;font-family:'DM Mono',monospace;transition:all .3s}
.btn-preview:hover{border-color:var(--accent);color:var(--accent)}

/* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
.sidebar{background:var(--surface);border-right:1px solid var(--border);padding:1.5rem 0;overflow-y:auto;position:sticky;top:56px;height:calc(100vh - 56px)}
.sidebar-section-label{font-family:'DM Mono',monospace;font-size:.6rem;letter-spacing:3px;text-transform:uppercase;color:var(--muted);padding:.4rem 1.2rem;margin-top:1rem}
.sidebar-item{display:flex;align-items:center;gap:.7rem;padding:.7rem 1.2rem;cursor:pointer;transition:all .25s;font-size:.82rem;color:var(--muted);border-left:2px solid transparent}
.sidebar-item:hover{color:var(--text);background:var(--surface2)}
.sidebar-item.active{color:var(--accent);background:rgba(232,255,71,.05);border-left-color:var(--accent)}
.sidebar-item .icon{font-size:1rem;width:20px;text-align:center}
.sidebar-badge{margin-left:auto;background:var(--surface3);color:var(--muted);font-family:'DM Mono',monospace;font-size:.6rem;padding:.15rem .5rem}

/* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
.main{padding:2rem;overflow-y:auto;height:calc(100vh - 56px)}
.tab-panel{display:none}
.tab-panel.active{display:block}

/* ‚îÄ‚îÄ PAGE HEADER ‚îÄ‚îÄ */
.page-header{margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:flex-end;flex-wrap:gap}
.page-header h1{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:3px;color:var(--text)}
.page-header p{font-size:.8rem;color:var(--muted);margin-top:.3rem}

/* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
.item-card{background:var(--surface);border:1px solid var(--border);margin-bottom:1rem;transition:border-color .3s}
.item-card:hover{border-color:rgba(232,255,71,.2)}
.card-header{display:flex;align-items:center;gap:1rem;padding:1rem 1.2rem;cursor:pointer;user-select:none}
.card-drag{color:var(--muted);font-size:.8rem;cursor:grab}
.card-icon{font-size:1.3rem;width:28px;text-align:center}
.card-meta{flex:1;min-width:0}
.card-title{font-size:.9rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.card-sub{font-family:'DM Mono',monospace;font-size:.65rem;color:var(--muted);margin-top:.15rem}
.card-actions{display:flex;gap:.5rem;flex-shrink:0}
.btn-icon{background:none;border:1px solid var(--border);color:var(--muted);width:30px;height:30px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.75rem;transition:all .3s}
.btn-icon.edit:hover{border-color:var(--accent2);color:var(--accent2)}
.btn-icon.del:hover{border-color:var(--danger);color:var(--danger)}
.btn-icon.expand:hover{border-color:var(--accent);color:var(--accent)}
.card-body{display:none;padding:0 1.2rem 1.2rem;border-top:1px solid var(--border)}
.card-body.open{display:block}

/* ‚îÄ‚îÄ FORMS ‚îÄ‚îÄ */
.form-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1rem;margin-top:1rem}
.form-grid.full{grid-template-columns:1fr}
.form-group{display:flex;flex-direction:column;gap:.4rem}
.form-group.span2{grid-column:span 2}
.form-group label{font-family:'DM Mono',monospace;font-size:.6rem;letter-spacing:3px;text-transform:uppercase;color:var(--muted)}
.form-group input,.form-group textarea,.form-group select{background:var(--surface2);border:1px solid var(--border);padding:.7rem .9rem;color:var(--text);font-family:'DM Sans',sans-serif;font-size:.85rem;outline:none;transition:border-color .3s;width:100%}
.form-group input:focus,.form-group textarea:focus,.form-group select:focus{border-color:var(--accent)}
.form-group textarea{min-height:90px;resize:vertical}
.form-group select option{background:var(--surface2)}
.hint{font-size:.7rem;color:var(--muted);margin-top:.25rem}

/* Skill sub-items */
.skill-items-list{display:flex;flex-direction:column;gap:.6rem;margin-top:.8rem}
.skill-item-row{display:grid;grid-template-columns:1fr 80px 32px;gap:.5rem;align-items:center}
.skill-item-row input{background:var(--surface2);border:1px solid var(--border);padding:.5rem .7rem;color:var(--text);font-size:.8rem;outline:none}
.skill-item-row input:focus{border-color:var(--accent)}
.add-skill-row{background:none;border:1px dashed var(--border);color:var(--muted);padding:.5rem;font-size:.75rem;letter-spacing:1px;cursor:pointer;width:100%;font-family:'DM Mono',monospace;transition:all .3s;margin-top:.5rem}
.add-skill-row:hover{border-color:var(--accent);color:var(--accent)}

/* Tags */
.tags-input-wrap{border:1px solid var(--border);background:var(--surface2);padding:.5rem;display:flex;flex-wrap:wrap;gap:.4rem;cursor:text;min-height:42px;transition:border-color .3s}
.tags-input-wrap:focus-within{border-color:var(--accent)}
.tag-chip{background:var(--surface3);border:1px solid var(--border);padding:.2rem .6rem;font-size:.7rem;font-family:'DM Mono',monospace;color:var(--text);display:flex;align-items:center;gap:.3rem}
.tag-chip button{background:none;border:none;color:var(--muted);cursor:pointer;font-size:.8rem;line-height:1;padding:0}
.tag-chip button:hover{color:var(--danger)}
.tags-input{background:none;border:none;outline:none;color:var(--text);font-family:'DM Mono',monospace;font-size:.75rem;min-width:80px;flex:1}

/* Form Buttons */
.form-actions{display:flex;gap:.7rem;margin-top:1.2rem;flex-wrap:wrap}
.btn-save{background:var(--accent);color:#000;border:none;padding:.65rem 1.5rem;font-size:.75rem;font-weight:500;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:background .3s;font-family:'DM Sans',sans-serif}
.btn-save:hover{background:var(--accent2)}
.btn-cancel{background:none;border:1px solid var(--border);color:var(--muted);padding:.65rem 1.5rem;font-size:.75rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:all .3s;font-family:'DM Sans',sans-serif}
.btn-cancel:hover{border-color:var(--muted);color:var(--text)}
.btn-add{background:none;border:1px solid var(--accent);color:var(--accent);padding:.65rem 1.5rem;font-size:.75rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:all .3s;font-family:'DM Mono',monospace;display:flex;align-items:center;gap:.5rem}
.btn-add:hover{background:rgba(232,255,71,.08)}

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast{position:fixed;bottom:2rem;right:2rem;background:var(--surface);border:1px solid var(--border);padding:1rem 1.5rem;font-size:.82rem;z-index:9999;transform:translateY(100px);opacity:0;transition:all .4s;display:flex;align-items:center;gap:.7rem;max-width:320px}
.toast.show{transform:translateY(0);opacity:1}
.toast.success{border-color:var(--success)}
.toast.error{border-color:var(--danger)}
.toast-icon{font-size:1rem}
.toast-msg{flex:1}

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:500;align-items:center;justify-content:center;padding:1rem}
.modal-overlay.open{display:flex}
.modal{background:var(--surface);border:1px solid var(--border);padding:2rem;max-width:480px;width:100%}
.modal h3{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;letter-spacing:2px;margin-bottom:.5rem}
.modal p{font-size:.85rem;color:var(--muted);margin-bottom:1.5rem;line-height:1.7}
.modal-actions{display:flex;gap:.7rem}
.btn-danger{background:var(--danger);color:#fff;border:none;padding:.65rem 1.5rem;font-size:.75rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;font-family:'DM Sans',sans-serif}

/* ‚îÄ‚îÄ SAVE BAR ‚îÄ‚îÄ */
.save-bar{position:sticky;bottom:0;background:var(--surface);border-top:1px solid var(--border);padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;gap:1rem}
.save-bar-text{font-size:.8rem;color:var(--muted)}
.save-bar-text span{color:var(--accent);font-family:'DM Mono',monospace}

/* ‚îÄ‚îÄ PROFILE SECTION ‚îÄ‚îÄ */
.profile-card{background:var(--surface);border:1px solid var(--border);padding:2rem;margin-bottom:1.5rem}
.profile-card h3{font-family:'DM Mono',monospace;font-size:.7rem;letter-spacing:3px;text-transform:uppercase;color:var(--accent);margin-bottom:1.2rem}

/* ‚îÄ‚îÄ EXPORT SECTION ‚îÄ‚îÄ */
.export-box{background:var(--surface);border:1px solid var(--border);padding:2rem}
.export-box h3{font-family:'DM Mono',monospace;font-size:.7rem;letter-spacing:3px;text-transform:uppercase;color:var(--accent);margin-bottom:1rem}
.export-box pre{background:var(--surface2);border:1px solid var(--border);padding:1.2rem;font-family:'DM Mono',monospace;font-size:.7rem;color:var(--muted);overflow-x:auto;max-height:300px;white-space:pre-wrap;word-break:break-all;margin:.8rem 0}
.copy-json-btn{background:none;border:1px solid var(--accent);color:var(--accent);padding:.6rem 1.2rem;font-size:.7rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;font-family:'DM Mono',monospace;transition:all .3s}
.copy-json-btn:hover{background:rgba(232,255,71,.08)}

/* ‚îÄ‚îÄ STATS DASH ‚îÄ‚îÄ */
.stats-row{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:1rem;margin-bottom:2rem}
.stat-box{background:var(--surface);border:1px solid var(--border);padding:1.2rem}
.stat-box .num{font-family:'Bebas Neue',sans-serif;font-size:2rem;color:var(--accent);letter-spacing:2px}
.stat-box .lbl{font-family:'DM Mono',monospace;font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-top:.2rem}

/* ‚îÄ‚îÄ INSTRUCTIONS ‚îÄ‚îÄ */
.info-box{background:rgba(71,255,219,.04);border:1px solid rgba(71,255,219,.15);padding:1.2rem;margin-bottom:1.5rem;font-size:.82rem;line-height:1.8;color:var(--muted)}
.info-box strong{color:var(--accent2)}
.info-box code{background:var(--surface2);padding:.1rem .4rem;font-family:'DM Mono',monospace;font-size:.75rem;color:var(--accent)}

/* ‚îÄ‚îÄ MOBILE ‚îÄ‚îÄ */
@media(max-width:700px){
  .admin-layout{grid-template-columns:1fr}
  .sidebar{position:fixed;left:-var(--sidebar-w);top:56px;z-index:200;height:calc(100vh - 56px);width:var(--sidebar-w);transition:transform .3s}
  .sidebar.open{transform:translateX(var(--sidebar-w))}
  .main{padding:1rem}
  .form-grid{grid-template-columns:1fr}
  .form-group.span2{grid-column:span 1}
}
</style>
</head>
<body>

<!-- Toast -->
<div class="toast" id="toast">
  <span class="toast-icon" id="toastIcon"></span>
  <span class="toast-msg" id="toastMsg"></span>
</div>

<!-- Delete Confirm Modal -->
<div class="modal-overlay" id="deleteModal">
  <div class="modal">
    <h3>Confirm Delete</h3>
    <p id="deleteModalMsg">Are you sure you want to delete this item? This cannot be undone.</p>
    <div class="modal-actions">
      <button class="btn-danger" id="confirmDeleteBtn">Delete</button>
      <button class="btn-cancel" onclick="closeDeleteModal()">Cancel</button>
    </div>
  </div>
</div>

<!-- LAYOUT -->
<div class="admin-layout">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar-logo">ADMIN PANEL</div>
    <div class="topbar-right">
      <div class="topbar-status"><div class="status-dot"></div><span id="dataStatus">Loading...</span></div>
      <button class="btn-preview" onclick="window.open('index.html','_blank')">‚Üó Preview Site</button>
    </div>
  </div>

  <!-- SIDEBAR -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-section-label">Overview</div>
    <div class="sidebar-item active" onclick="showTab('dashboard')" data-tab="dashboard"><span class="icon">‚ö°</span>Dashboard</div>

    <div class="sidebar-section-label">Identity</div>
    <div class="sidebar-item" onclick="showTab('profile')" data-tab="profile"><span class="icon">üë§</span>Profile & Meta</div>
    <div class="sidebar-item" onclick="showTab('about')" data-tab="about"><span class="icon">üìù</span>About</div>

    <div class="sidebar-section-label">Sections</div>
    <div class="sidebar-item" onclick="showTab('skills')" data-tab="skills"><span class="icon">‚öôÔ∏è</span>Skills<span class="sidebar-badge" id="badge-skills">0</span></div>
    <div class="sidebar-item" onclick="showTab('education')" data-tab="education"><span class="icon">üéì</span>Education<span class="sidebar-badge" id="badge-education">0</span></div>
    <div class="sidebar-item" onclick="showTab('projects')" data-tab="projects"><span class="icon">üöÄ</span>Projects<span class="sidebar-badge" id="badge-projects">0</span></div>
    <div class="sidebar-item" onclick="showTab('internship')" data-tab="internship"><span class="icon">üíº</span>Internships<span class="sidebar-badge" id="badge-internship">0</span></div>
    <div class="sidebar-item" onclick="showTab('certifications')" data-tab="certifications"><span class="icon">üèÜ</span>Certifications<span class="sidebar-badge" id="badge-certifications">0</span></div>

    <div class="sidebar-section-label">More</div>
    <div class="sidebar-item" onclick="showTab('contact')" data-tab="contact"><span class="icon">‚úâÔ∏è</span>Contact</div>
    <div class="sidebar-item" onclick="showTab('export')" data-tab="export"><span class="icon">üì¶</span>Export JSON</div>
  </div>

  <!-- MAIN -->
  <div class="main">

    <!-- DASHBOARD -->
    <div class="tab-panel active" id="tab-dashboard">
      <div class="page-header">
        <div><h1>DASHBOARD</h1><p>Your portfolio at a glance</p></div>
      </div>
      <div class="stats-row" id="dashStats"></div>
      <div class="info-box">
        <strong>How to use this Admin Panel:</strong><br>
        1. Edit any section using the forms on the left sidebar.<br>
        2. Click <strong>Save Changes</strong> in any section ‚Äî it updates <code>data.json</code>.<br>
        3. Go to <strong>Export JSON</strong> tab to download the updated <code>data.json</code>.<br>
        4. Replace your <code>data.json</code> file on GitHub ‚Äî your live site updates in ~30 seconds.<br><br>
        <strong>‚ö†Ô∏è Note:</strong> This admin panel runs <strong>locally only</strong>. All edits are saved in browser memory until you export and push to GitHub.
      </div>
      <div class="info-box" style="border-color:rgba(232,255,71,.15);background:rgba(232,255,71,.03)">
        <strong>üìÅ Folder Structure:</strong><br>
        <code>my-portfolio/</code><br>
        <code>‚îú‚îÄ‚îÄ index.html</code> ‚Üê your public portfolio<br>
        <code>‚îú‚îÄ‚îÄ data.json</code> ‚Üê your data (edit via Export tab)<br>
        <code>‚îî‚îÄ‚îÄ admin.html</code> ‚Üê this file (local use only)<br><br>
        <strong>üåê To run locally:</strong> Use VS Code Live Server, or run <code>npx serve .</code> in the folder.
      </div>
    </div>

    <!-- PROFILE -->
    <div class="tab-panel" id="tab-profile">
      <div class="page-header"><div><h1>PROFILE & META</h1><p>Your name, logo, tagline and roles</p></div></div>
      <div class="profile-card">
        <h3>Identity</h3>
        <div class="form-grid">
          <div class="form-group"><label>First Name</label><input id="pf-first" type="text" placeholder="ALEX"></div>
          <div class="form-group"><label>Last Name</label><input id="pf-last" type="text" placeholder="MORGAN"></div>
          <div class="form-group"><label>Nav Logo Text</label><input id="pf-logo" type="text" placeholder="PORT.DEV"></div>
          <div class="form-group"><label>Hire Me Button Text</label><input id="pf-cta" type="text" placeholder="Hire Me"></div>
          <div class="form-group span2"><label>Availability Badge</label><input id="pf-avail" type="text" placeholder="‚ú¶ Available for opportunities"></div>
          <div class="form-group span2"><label>Tagline / Hero Description</label><textarea id="pf-tagline" placeholder="Your tagline..."></textarea></div>
        </div>
      </div>
      <div class="profile-card">
        <h3>Animated Roles (Ticker)</h3>
        <p style="font-size:.8rem;color:var(--muted);margin-bottom:1rem">These scroll across your hero section. Add comma-separated roles or use Enter.</p>
        <div class="form-group">
          <label>Roles</label>
          <div class="tags-input-wrap" id="rolesTagsWrap"></div>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn-save" onclick="saveProfile()">Save Profile</button>
      </div>
    </div>

    <!-- ABOUT -->
    <div class="tab-panel" id="tab-about">
      <div class="page-header"><div><h1>ABOUT</h1><p>Photo, bio paragraphs and stat numbers</p></div></div>
      <div class="profile-card">
        <h3>Photo & Badge</h3>
        <div class="form-grid">
          <div class="form-group"><label>Photo URL</label><input id="ab-photo" type="text" placeholder="https://... or leave empty for initials"></div>
          <div class="form-group"><label>Initials (if no photo)</label><input id="ab-initials" type="text" placeholder="AM" maxlength="3"></div>
          <div class="form-group span2"><label>Badge Text</label><input id="ab-badge" type="text" placeholder="AVAILABLE FOR HIRE"></div>
        </div>
      </div>
      <div class="profile-card">
        <h3>Bio Paragraphs</h3>
        <div id="bioParagraphs"></div>
        <button class="add-skill-row" onclick="addBioPara()">+ Add Paragraph</button>
      </div>
      <div class="profile-card">
        <h3>Stats</h3>
        <div id="aboutStats"></div>
        <button class="add-skill-row" onclick="addAboutStat()">+ Add Stat</button>
      </div>
      <div class="form-actions">
        <button class="btn-save" onclick="saveAbout()">Save About</button>
      </div>
    </div>

    <!-- SKILLS -->
    <div class="tab-panel" id="tab-skills">
      <div class="page-header">
        <div><h1>SKILLS</h1><p>Skill categories with progress bars and tags</p></div>
        <button class="btn-add" onclick="addSkillCategory()">+ Add Category</button>
      </div>
      <div id="skillsList"></div>
    </div>

    <!-- EDUCATION -->
    <div class="tab-panel" id="tab-education">
      <div class="page-header">
        <div><h1>EDUCATION</h1><p>Degrees, schools and qualifications</p></div>
        <button class="btn-add" onclick="addItem('education')">+ Add Entry</button>
      </div>
      <div id="educationList"></div>
    </div>

    <!-- PROJECTS -->
    <div class="tab-panel" id="tab-projects">
      <div class="page-header">
        <div><h1>PROJECTS</h1><p>Your built projects with tech stack</p></div>
        <button class="btn-add" onclick="addItem('projects')">+ Add Project</button>
      </div>
      <div id="projectsList"></div>
    </div>

    <!-- INTERNSHIP -->
    <div class="tab-panel" id="tab-internship">
      <div class="page-header">
        <div><h1>INTERNSHIPS</h1><p>Work experience and internships</p></div>
        <button class="btn-add" onclick="addItem('internship')">+ Add Internship</button>
      </div>
      <div id="internshipList"></div>
    </div>

    <!-- CERTIFICATIONS -->
    <div class="tab-panel" id="tab-certifications">
      <div class="page-header">
        <div><h1>CERTIFICATIONS</h1><p>Certificates with image preview</p></div>
        <button class="btn-add" onclick="addItem('certifications')">+ Add Certification</button>
      </div>
      <div id="certificationsList"></div>
    </div>

    <!-- CONTACT -->
    <div class="tab-panel" id="tab-contact">
      <div class="page-header"><div><h1>CONTACT</h1><p>Contact details and social links</p></div></div>
      <div class="profile-card">
        <h3>Headline & Intro</h3>
        <div class="form-grid">
          <div class="form-group span2"><label>Headline</label><input id="ct-headline" type="text" placeholder="READY TO BUILD SOMETHING GREAT?"></div>
          <div class="form-group span2"><label>Intro Text</label><textarea id="ct-intro" placeholder="Whether you have a project..."></textarea></div>
        </div>
      </div>
      <div class="profile-card">
        <h3>Contact Details</h3>
        <div id="contactDetails"></div>
        <button class="add-skill-row" onclick="addContactDetail()">+ Add Detail</button>
      </div>
      <div class="profile-card">
        <h3>Social Links</h3>
        <div id="socialLinks"></div>
        <button class="add-skill-row" onclick="addSocialLink()">+ Add Social Link</button>
      </div>
      <div class="profile-card">
        <h3>Footer Socials</h3>
        <div id="footerSocials"></div>
        <button class="add-skill-row" onclick="addFooterSocial()">+ Add Footer Social</button>
      </div>
      <div class="profile-card">
        <h3>Footer</h3>
        <div class="form-grid">
          <div class="form-group"><label>Copyright Year</label><input id="ft-year" type="text" placeholder="2025"></div>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn-save" onclick="saveContact()">Save Contact & Footer</button>
      </div>
    </div>

    <!-- EXPORT -->
    <div class="tab-panel" id="tab-export">
      <div class="page-header"><div><h1>EXPORT JSON</h1><p>Download updated data.json and upload to GitHub</p></div></div>
      <div class="export-box">
        <h3>Current data.json Preview</h3>
        <pre id="jsonPreview">Loading...</pre>
        <div style="display:flex;gap:.8rem;flex-wrap:wrap">
          <button class="copy-json-btn" onclick="copyJSON()">üìã Copy JSON</button>
          <button class="btn-save" onclick="downloadJSON()">‚¨á Download data.json</button>
        </div>
      </div>
      <div class="info-box" style="margin-top:1.5rem">
        <strong>How to push to GitHub:</strong><br>
        1. Click <strong>Download data.json</strong> above.<br>
        2. Go to your GitHub repo ‚Üí click <code>data.json</code>.<br>
        3. Click the ‚úèÔ∏è <strong>pencil (Edit)</strong> icon.<br>
        4. Select all text ‚Üí paste the new JSON ‚Üí click <strong>Commit changes</strong>.<br>
        5. Your live site updates in ~30 seconds! üéâ<br><br>
        <strong>OR paste directly into GitHub's editor</strong> using the Copy button above.
      </div>
    </div>

  </div><!-- end main -->
</div><!-- end layout -->

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let DATA = {};
let deleteCallback = null;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  INIT ‚Äî load data.json
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
fetch('data.json')
  .then(r => r.ok ? r.json() : Promise.reject(r.status))
  .then(d => {
    DATA = JSON.parse(JSON.stringify(d)); // deep clone
    setStatus('data.json loaded ‚úì');
    renderAll();
    toast('Data loaded successfully', 'success');
  })
  .catch(e => {
    setStatus('data.json not found ‚Äî using defaults');
    DATA = getDefaultData();
    renderAll();
    toast('Could not load data.json ‚Äî using sample data. Make sure you open this via a local server.', 'error');
  });

function setStatus(msg) {
  document.getElementById('dataStatus').textContent = msg;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  RENDER ALL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderAll() {
  updateBadges();
  renderDashboard();
  renderProfile();
  renderAbout();
  renderSkills();
  renderList('education');
  renderList('projects');
  renderList('internship');
  renderList('certifications');
  renderContact();
  updateJSONPreview();
}

function updateBadges() {
  const keys = ['skills','education','projects','internships','certifications'];
  keys.forEach(k => {
    // badge element ids use 'internship' (no s) but DATA key is 'internships'
    const badgeId = k === 'internships' ? 'badge-internship' : 'badge-'+k;
    const el = document.getElementById(badgeId);
    if (el) el.textContent = (DATA[k] || []).length;
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DASHBOARD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderDashboard() {
  const stats = [
    { num: (DATA.projects||[]).length, lbl: 'Projects' },
    { num: (DATA.skills||[]).length, lbl: 'Skill Categories' },
    { num: (DATA.education||[]).length, lbl: 'Education' },
    { num: (DATA.internships||[]).length, lbl: 'Internships' },
    { num: (DATA.certifications||[]).length, lbl: 'Certifications' },
    { num: (DATA.roles||[]).length, lbl: 'Roles in Ticker' },
  ];
  document.getElementById('dashStats').innerHTML = stats.map(s =>
    `<div class="stat-box"><div class="num">${s.num}</div><div class="lbl">${s.lbl}</div></div>`
  ).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PROFILE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderProfile() {
  const n = DATA.name || {};
  const m = DATA.meta || {};
  document.getElementById('pf-first').value = n.first || '';
  document.getElementById('pf-last').value = n.last || '';
  document.getElementById('pf-logo').value = m.logo || '';
  document.getElementById('pf-cta').value = m.hireCta || '';
  document.getElementById('pf-avail').value = DATA.availability || '';
  document.getElementById('pf-tagline').value = DATA.tagline || '';
  renderTagsInput('rolesTagsWrap', DATA.roles || []);
}

function saveProfile() {
  DATA.name = { first: v('pf-first'), last: v('pf-last') };
  DATA.meta = { logo: v('pf-logo'), hireCta: v('pf-cta') };
  DATA.availability = v('pf-avail');
  DATA.tagline = v('pf-tagline');
  DATA.roles = getTagsValue('rolesTagsWrap');
  finalize('Profile saved');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  ABOUT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderAbout() {
  const ab = DATA.about || {};
  document.getElementById('ab-photo').value = ab.photo || '';
  document.getElementById('ab-initials').value = ab.initials || '';
  document.getElementById('ab-badge').value = ab.badge || '';
  renderBioParagraphs(ab.bio || []);
  renderAboutStats(ab.stats || []);
}

function renderBioParagraphs(bio) {
  document.getElementById('bioParagraphs').innerHTML = bio.map((p,i) => `
    <div class="skill-item-row" style="grid-template-columns:1fr 32px;margin-bottom:.5rem">
      <textarea class="bio-para" style="background:var(--surface2);border:1px solid var(--border);padding:.6rem;color:var(--text);font-family:'DM Sans',sans-serif;font-size:.83rem;min-height:60px;resize:vertical;outline:none">${p}</textarea>
      <button class="btn-icon del" onclick="removeBioPara(this)">‚úï</button>
    </div>`).join('');
}
function addBioPara() {
  document.getElementById('bioParagraphs').insertAdjacentHTML('beforeend', `
    <div class="skill-item-row" style="grid-template-columns:1fr 32px;margin-bottom:.5rem">
      <textarea class="bio-para" style="background:var(--surface2);border:1px solid var(--border);padding:.6rem;color:var(--text);font-family:'DM Sans',sans-serif;font-size:.83rem;min-height:60px;resize:vertical;outline:none" placeholder="New paragraph..."></textarea>
      <button class="btn-icon del" onclick="removeBioPara(this)">‚úï</button>
    </div>`);
}
function removeBioPara(btn) { btn.parentElement.remove(); }

function renderAboutStats(stats) {
  document.getElementById('aboutStats').innerHTML = stats.map(s => `
    <div class="skill-item-row" style="margin-bottom:.5rem">
      <input type="text" value="${s.num}" placeholder="15+" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <input type="text" value="${s.label}" placeholder="Projects" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`).join('');
}
function addAboutStat() {
  document.getElementById('aboutStats').insertAdjacentHTML('beforeend', `
    <div class="skill-item-row" style="margin-bottom:.5rem">
      <input type="text" placeholder="0+" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <input type="text" placeholder="Label" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`);
}

function saveAbout() {
  const bio = [...document.querySelectorAll('.bio-para')].map(t => t.value).filter(Boolean);
  const statRows = document.getElementById('aboutStats').querySelectorAll('.skill-item-row');
  const stats = [...statRows].map(row => {
    const inputs = row.querySelectorAll('input');
    return { num: inputs[0]?.value || '', label: inputs[1]?.value || '' };
  }).filter(s => s.num);
  DATA.about = {
    photo: v('ab-photo'), initials: v('ab-initials'), badge: v('ab-badge'), bio, stats
  };
  finalize('About saved');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SKILLS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderSkills() {
  document.getElementById('skillsList').innerHTML = (DATA.skills||[]).map((cat,i) => `
    <div class="item-card">
      <div class="card-header" onclick="toggleCard(this)">
        <span class="card-icon">‚öôÔ∏è</span>
        <div class="card-meta">
          <div class="card-title">${cat.category}</div>
          <div class="card-sub">${(cat.items||[]).length} skills ¬∑ ${(cat.tags||[]).length} tags</div>
        </div>
        <div class="card-actions" onclick="event.stopPropagation()">
          <button class="btn-icon del" onclick="deleteItem('skills',${i})">‚úï</button>
          <button class="btn-icon expand" onclick="toggleCard(this.closest('.item-card').querySelector('.card-header'))">‚ñº</button>
        </div>
      </div>
      <div class="card-body">
        <div class="form-grid" style="margin-top:1rem">
          <div class="form-group"><label>Category Name</label><input class="sk-cat-name" type="text" value="${cat.category}" placeholder="Frontend"></div>
        </div>
        <div class="form-group" style="margin-top:1rem"><label>Skill Items (Name + %) </label>
          <div class="skill-items-list" id="skill-items-${i}">
            ${(cat.items||[]).map(item=>`
              <div class="skill-item-row">
                <input type="text" value="${item.name}" placeholder="Skill name">
                <input type="number" value="${item.pct}" min="0" max="100" placeholder="90">
                <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
              </div>`).join('')}
          </div>
          <button class="add-skill-row" onclick="addSkillItem('skill-items-${i}')">+ Add Skill</button>
        </div>
        <div class="form-group" style="margin-top:1rem"><label>Tags</label>
          <div class="tags-input-wrap" id="skill-tags-${i}"></div>
        </div>
        <div class="form-actions">
          <button class="btn-save" onclick="saveSkillCategory(${i},this)">Save Category</button>
        </div>
      </div>
    </div>`).join('');
  // init tags inputs
  (DATA.skills||[]).forEach((cat,i) => renderTagsInput(`skill-tags-${i}`, cat.tags||[]));
}

function addSkillItem(containerId) {
  document.getElementById(containerId).insertAdjacentHTML('beforeend', `
    <div class="skill-item-row">
      <input type="text" placeholder="Skill name">
      <input type="number" value="80" min="0" max="100">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`);
}

function addSkillCategory() {
  DATA.skills = DATA.skills || [];
  DATA.skills.push({ category: 'New Category', items: [], tags: [] });
  renderSkills(); updateBadges(); updateJSONPreview();
  showTab('skills');
  toast('New category added ‚Äî expand to edit', 'success');
}

function saveSkillCategory(i, btn) {
  const card = btn.closest('.item-card');
  const catName = card.querySelector('.sk-cat-name').value;
  const itemRows = card.querySelectorAll(`#skill-items-${i} .skill-item-row`);
  const items = [...itemRows].map(row => {
    const inputs = row.querySelectorAll('input');
    return { name: inputs[0]?.value||'', pct: parseInt(inputs[1]?.value)||0 };
  }).filter(it => it.name);
  const tags = getTagsValue(`skill-tags-${i}`);
  DATA.skills[i] = { category: catName, items, tags };
  finalize('Skill category saved');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  GENERIC LIST RENDERER (education, projects, internship, certs)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const SCHEMAS = {
  education: {
    icon: 'üéì',
    titleKey: 'title',
    subKey: 'institution',
    fields: [
      { key:'year', label:'Year / Period', placeholder:'2021 ‚Äî 2025' },
      { key:'title', label:'Degree / Title', placeholder:'B.Tech Computer Science', span:true },
      { key:'institution', label:'School / University', placeholder:'MIT', span:true },
      { key:'description', label:'Description', placeholder:'Details about this...', type:'textarea', span:true }
    ]
  },
  projects: {
    icon: 'üöÄ',
    titleKey: 'title',
    subKey: 'year',
    fields: [
      { key:'logo', label:'Logo (emoji or image URL)', placeholder:'üß†' },
      { key:'year', label:'Year', placeholder:'2024' },
      { key:'title', label:'Project Title', placeholder:'My Project', span:true },
      { key:'description', label:'Description', placeholder:'What it does...', type:'textarea', span:true },
      { key:'stack', label:'Tech Stack (comma separated)', placeholder:'React, Node.js, MongoDB', span:true },
      { key:'link', label:'Project URL', placeholder:'https://myproject.com', span:true }
    ]
  },
  internship: {
    dataKey: 'internships',
    icon: 'üíº',
    titleKey: 'company',
    subKey: 'role',
    fields: [
      { key:'logo', label:'Logo (letter or image URL)', placeholder:'G' },
      { key:'year', label:'Year', placeholder:'2024' },
      { key:'company', label:'Company Name', placeholder:'GOOGLE', span:true },
      { key:'role', label:'Role / Position', placeholder:'Software Engineering Intern', span:true },
      { key:'period', label:'Period & Location', placeholder:'May 2024 ‚Äî Aug 2024 ¬∑ NYC', span:true },
      { key:'description', label:'Description', placeholder:'What you did...', type:'textarea', span:true }
    ]
  },
  certifications: {
    icon: 'üèÜ',
    titleKey: 'name',
    subKey: 'issuer',
    fields: [
      { key:'icon', label:'Icon Emoji', placeholder:'‚òÅÔ∏è' },
      { key:'year', label:'Year Issued', placeholder:'2024' },
      { key:'name', label:'Certificate Name', placeholder:'AWS Solutions Architect', span:true },
      { key:'issuer', label:'Issuing Organization', placeholder:'Amazon Web Services', span:true },
      { key:'image', label:'Certificate Image URL (for lightbox)', placeholder:'https://... or leave empty', span:true },
      { key:'description', label:'Description', placeholder:'What this cert covers...', type:'textarea', span:true }
    ]
  }
};

function renderList(section) {
  const schema = SCHEMAS[section];
  const listEl = document.getElementById(section+'List');
  if (!listEl || !schema) return;
  const dataKey = schema.dataKey || section;
  const items = DATA[dataKey] || [];
  listEl.innerHTML = items.map((item, i) => {
    const fieldHTML = schema.fields.map(f => {
      const val = f.key === 'stack' ? (item.stack||[]).join(', ') : (item[f.key]||'');
      const span = f.span ? 'span2' : '';
      if (f.type === 'textarea') {
        return `<div class="form-group ${span}"><label>${f.label}</label><textarea data-key="${f.key}" placeholder="${f.placeholder}">${val}</textarea></div>`;
      }
      return `<div class="form-group ${span}"><label>${f.label}</label><input type="text" data-key="${f.key}" value="${val.replace(/"/g,'&quot;')}" placeholder="${f.placeholder}"></div>`;
    }).join('');
    return `
    <div class="item-card">
      <div class="card-header" onclick="toggleCard(this)">
        <span class="card-icon">${item[schema.icon] || schema.icon}</span>
        <div class="card-meta">
          <div class="card-title">${item[schema.titleKey] || 'Untitled'}</div>
          <div class="card-sub">${item[schema.subKey] || ''}</div>
        </div>
        <div class="card-actions" onclick="event.stopPropagation()">
          <button class="btn-icon del" onclick="deleteItem('${section}',${i})">‚úï</button>
          <button class="btn-icon expand">‚ñº</button>
        </div>
      </div>
      <div class="card-body">
        <div class="form-grid">${fieldHTML}</div>
        <div class="form-actions">
          <button class="btn-save" onclick="saveListItem('${section}',${i},this)">Save</button>
        </div>
      </div>
    </div>`;
  }).join('');
}

function saveListItem(section, i, btn) {
  const card = btn.closest('.item-card');
  const inputs = card.querySelectorAll('[data-key]');
  const updated = {};
  inputs.forEach(inp => {
    const key = inp.dataset.key;
    if (key === 'stack') {
      updated[key] = inp.value.split(',').map(s=>s.trim()).filter(Boolean);
    } else {
      updated[key] = inp.value;
    }
  });
  const dataKey = (SCHEMAS[section] && SCHEMAS[section].dataKey) || section;
  DATA[dataKey][i] = updated;
  renderList(section);
  finalize(section + ' item saved');
}

function addItem(section) {
  const schema = SCHEMAS[section];
  const dataKey = (schema && schema.dataKey) || section;
  DATA[dataKey] = DATA[dataKey] || [];
  const blank = {};
  schema.fields.forEach(f => { blank[f.key] = f.key === 'stack' ? [] : ''; });
  DATA[dataKey].unshift(blank);
  renderList(section);
  updateBadges();
  updateJSONPreview();
  // auto-open first card
  setTimeout(() => {
    const firstCard = document.querySelector('#'+section+'List .card-header');
    if (firstCard) { toggleCard(firstCard); firstCard.scrollIntoView({behavior:'smooth',block:'center'}); }
  }, 100);
  toast('New item added ‚Äî fill in the form above', 'success');
}

function deleteItem(section, i) {
  const dataKey = (SCHEMAS[section] && SCHEMAS[section].dataKey) || section;
  showDeleteModal(`Delete "${(DATA[dataKey][i]?.title || DATA[dataKey][i]?.name || DATA[dataKey][i]?.company || DATA[dataKey][i]?.category || 'this item')}"?`, () => {
    DATA[dataKey].splice(i, 1);
    if (section === 'skills') renderSkills(); else renderList(section);
    updateBadges();
    finalize('Item deleted');
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  CONTACT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderContact() {
  const ct = DATA.contact || {};
  document.getElementById('ct-headline').value = ct.headline || '';
  document.getElementById('ct-intro').value = ct.intro || '';
  renderContactDetails(ct.details || []);
  renderSocialLinks(ct.socials || []);
  renderFooterSocials((DATA.footer||{}).socials || []);
  document.getElementById('ft-year').value = (DATA.footer||{}).year || new Date().getFullYear();
}

function renderContactDetails(details) {
  document.getElementById('contactDetails').innerHTML = details.map(d => `
    <div class="skill-item-row" style="margin-bottom:.5rem">
      <input type="text" value="${d.icon||''}" placeholder="‚úâ" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none;max-width:60px">
      <input type="text" value="${d.text||''}" placeholder="your@email.com" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none;flex:1">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`).join('');
}
function addContactDetail() {
  document.getElementById('contactDetails').insertAdjacentHTML('beforeend', `
    <div class="skill-item-row" style="margin-bottom:.5rem">
      <input type="text" placeholder="üìû" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none;max-width:60px">
      <input type="text" placeholder="Your detail..." style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none;flex:1">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`);
}

function renderSocialLinks(socials) {
  document.getElementById('socialLinks').innerHTML = socials.map(s => `
    <div class="skill-item-row" style="margin-bottom:.5rem">
      <input type="text" value="${s.label||''}" placeholder="GitHub" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <input type="text" value="${s.link||''}" placeholder="https://github.com/..." style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`).join('');
}
function addSocialLink() {
  document.getElementById('socialLinks').insertAdjacentHTML('beforeend', `
    <div class="skill-item-row" style="margin-bottom:.5rem">
      <input type="text" placeholder="LinkedIn" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <input type="text" placeholder="https://linkedin.com/in/..." style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`);
}

function renderFooterSocials(socials) {
  document.getElementById('footerSocials').innerHTML = socials.map(s => `
    <div class="skill-item-row" style="margin-bottom:.5rem;grid-template-columns:80px 80px 1fr 32px">
      <input type="text" value="${s.label||''}" placeholder="GH" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <input type="text" value="${s.title||''}" placeholder="GitHub" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <input type="text" value="${s.link||''}" placeholder="https://..." style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`).join('');
}
function addFooterSocial() {
  document.getElementById('footerSocials').insertAdjacentHTML('beforeend', `
    <div class="skill-item-row" style="margin-bottom:.5rem;grid-template-columns:80px 80px 1fr 32px">
      <input type="text" placeholder="LI" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <input type="text" placeholder="LinkedIn" style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <input type="text" placeholder="https://..." style="background:var(--surface2);border:1px solid var(--border);padding:.5rem;color:var(--text);font-size:.83rem;outline:none">
      <button class="btn-icon del" onclick="this.parentElement.remove()">‚úï</button>
    </div>`);
}

function saveContact() {
  // details
  const detailRows = document.querySelectorAll('#contactDetails .skill-item-row');
  const details = [...detailRows].map(row => {
    const inputs = row.querySelectorAll('input');
    return { icon: inputs[0]?.value||'', text: inputs[1]?.value||'' };
  }).filter(d => d.text);

  // socials
  const socRows = document.querySelectorAll('#socialLinks .skill-item-row');
  const socials = [...socRows].map(row => {
    const inputs = row.querySelectorAll('input');
    return { label: inputs[0]?.value||'', link: inputs[1]?.value||'#' };
  }).filter(s => s.label);

  // footer socials
  const ftRows = document.querySelectorAll('#footerSocials .skill-item-row');
  const ftSocials = [...ftRows].map(row => {
    const inputs = row.querySelectorAll('input');
    return { label: inputs[0]?.value||'', title: inputs[1]?.value||'', link: inputs[2]?.value||'#' };
  }).filter(s => s.label);

  DATA.contact = { headline: v('ct-headline'), intro: v('ct-intro'), details, socials };
  DATA.footer = { year: v('ft-year'), socials: ftSocials };
  finalize('Contact & footer saved');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  TAGS INPUT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderTagsInput(containerId, tags) {
  const wrap = document.getElementById(containerId);
  if (!wrap) return;
  wrap.innerHTML = '';
  tags.forEach(tag => wrap.appendChild(createTagChip(tag, wrap)));
  const input = document.createElement('input');
  input.className = 'tags-input';
  input.placeholder = 'Type and press Enter...';
  input.addEventListener('keydown', e => {
    if ((e.key === 'Enter' || e.key === ',') && input.value.trim()) {
      e.preventDefault();
      const chip = createTagChip(input.value.trim(), wrap);
      wrap.insertBefore(chip, input);
      input.value = '';
    }
    if (e.key === 'Backspace' && !input.value) {
      const chips = wrap.querySelectorAll('.tag-chip');
      if (chips.length) chips[chips.length-1].remove();
    }
  });
  wrap.appendChild(input);
  wrap.addEventListener('click', () => input.focus());
}

function createTagChip(text, wrap) {
  const chip = document.createElement('span');
  chip.className = 'tag-chip';
  chip.innerHTML = `${text}<button onclick="this.parentElement.remove()" title="Remove">‚úï</button>`;
  return chip;
}

function getTagsValue(containerId) {
  const wrap = document.getElementById(containerId);
  return [...(wrap?.querySelectorAll('.tag-chip')||[])].map(c => c.textContent.replace('‚úï','').trim()).filter(Boolean);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  EXPORT / DOWNLOAD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updateJSONPreview() {
  const el = document.getElementById('jsonPreview');
  if (el) el.textContent = JSON.stringify(DATA, null, 2);
}

function downloadJSON() {
  const blob = new Blob([JSON.stringify(DATA, null, 2)], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'data.json';
  a.click();
  toast('data.json downloaded! Now upload it to GitHub.', 'success');
}

function copyJSON() {
  navigator.clipboard.writeText(JSON.stringify(DATA, null, 2))
    .then(() => toast('JSON copied to clipboard!', 'success'))
    .catch(() => toast('Copy failed ‚Äî use the download button instead', 'error'));
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showTab(name) {
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
  document.getElementById('tab-'+name)?.classList.add('active');
  document.querySelector(`[data-tab="${name}"]`)?.classList.add('active');
  if (name === 'export') updateJSONPreview();
}

function toggleCard(header) {
  const body = header.nextElementSibling;
  if (!body || !body.classList.contains('card-body')) return;
  body.classList.toggle('open');
  const expandBtn = header.querySelector('.btn-icon.expand');
  if (expandBtn) expandBtn.textContent = body.classList.contains('open') ? '‚ñ≤' : '‚ñº';
}

function finalize(msg) {
  updateBadges();
  renderDashboard();
  updateJSONPreview();
  toast(msg + ' ‚Äî go to Export to download data.json', 'success');
}

function v(id) { return document.getElementById(id)?.value || ''; }

function toast(msg, type='success') {
  const t = document.getElementById('toast');
  const icon = document.getElementById('toastIcon');
  const msgEl = document.getElementById('toastMsg');
  icon.textContent = type === 'success' ? '‚úì' : '‚ö†';
  msgEl.textContent = msg;
  t.className = 'toast show ' + type;
  clearTimeout(t._timer);
  t._timer = setTimeout(() => t.className = 'toast', 4000);
}

function showDeleteModal(msg, cb) {
  document.getElementById('deleteModalMsg').textContent = msg;
  document.getElementById('deleteModal').classList.add('open');
  deleteCallback = cb;
}
function closeDeleteModal() { document.getElementById('deleteModal').classList.remove('open'); deleteCallback = null; }
document.getElementById('confirmDeleteBtn').onclick = () => {
  if (deleteCallback) deleteCallback();
  closeDeleteModal();
};
document.addEventListener('keydown', e => { if (e.key==='Escape') closeDeleteModal(); });

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DEFAULT DATA (fallback)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function getDefaultData() {
  return {
    meta:{ logo:'PORT.DEV', hireCta:'Hire Me' },
    name:{ first:'ALEX', last:'MORGAN' },
    availability:'‚ú¶ Available for opportunities',
    tagline:'Crafting exceptional digital experiences.',
    roles:['Full Stack Developer','UI/UX Designer','Problem Solver'],
    about:{ photo:'', initials:'AM', badge:'AVAILABLE FOR HIRE', bio:['Add your bio here.'], stats:[{num:'0',label:'Projects'}] },
    skills:[{ category:'Frontend', items:[{name:'React',pct:90}], tags:['HTML5','CSS3'] }],
    education:[{ year:'2021-2025', title:'B.Tech CS', institution:'Your University', description:'Add details.' }],
    projects:[{ logo:'üöÄ', year:'2024', title:'My Project', description:'What it does.', stack:['React'], link:'#' }],
    internships:[{ logo:'C', year:'2024', company:'COMPANY', role:'Intern', period:'2024 ¬∑ Remote', description:'What you did.' }],
    certifications:[{ icon:'üèÜ', name:'My Certificate', issuer:'Issuer', year:'2024', image:'', description:'' }],
    contact:{ headline:'GET IN TOUCH', intro:'Feel free to reach out.', details:[{icon:'‚úâ',text:'you@email.com'}], socials:[{label:'GitHub',link:'#'}] },
    footer:{ year:'2025', socials:[{label:'GH',title:'GitHub',link:'#'}] }
  };
}
</script>
</body>
</html>